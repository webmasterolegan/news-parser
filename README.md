# News Parser

Сборщик новостных публикаций из RSS
## Основные технологии

**Laravel 10**

**MySQL 8**

### Дополнительные пакеты

Получение данных по HTTP [Guzzle HTTP client](https://laravel.com/docs/10.x/http-client)

Отладка [Laravel Telescope](https://laravel.com/docs/10.x/telescope)

## Описание

Сбор и добавление новостей осуществляется командой:

php artisan news:update

Для автоматической сборки новостей необходимо запустить планировщик задач Laravel. Планировщик будет запускать команду куждую минуту.

На текущий момент блокировка парсера происходит только на **уровне планировщика**!

Логирование запросов парсера реализовано через прослушивание событий **Guzzle HTTP** клиента.
По умолчанию логируются все запросы, в базу сохраняются только текстовые данные, в противном случае будет записано значение (binary data: *тип данных*)

Сохранение изображений реализовано через прослушивание события **created** модели **App\Models\Image**

## Настройки

**PARSER_RSS_FEED_URL** URL для получения новостной ленты

**PARSER_NEWS_ON_PAGE** Количество записей для постраничной навигации

## API

Получение новостей /api/news

Для сортировки по дате публикации необходимо указать GET переменную **sort_by_date=true**

Пример: */api/news?sort_by_date=true*

Для получения конкретных полей необходимо указать GET переменную **attributes** перечисляя поля через запятую.
Если значение не указано, будут возвращены все поля согласно настройкам App\Http\Resources\NewsResource

Пример: */api/news?attributes=id,title,description,published_at,authors,image*
